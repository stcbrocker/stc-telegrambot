{"_id":"smashah-puppeteer-page-proxy","_rev":"1-e1bbfae62775c4b4a5ab6b39f7ad5b05","name":"smashah-puppeteer-page-proxy","dist-tags":{"latest":"1.2.9"},"versions":{"1.2.8":{"name":"smashah-puppeteer-page-proxy","description":"Additional Node.js module to use with 'puppeteer' for setting proxies per page basis.","version":"1.2.8","author":{"name":"Cuadrix","email":"cuadrix12000@gmail.com","url":"https://github.com/Cuadrix"},"homepage":"https://github.com/Cuadrix/puppeteer-page-proxy","main":"./src/index.js","types":"./src/index.d.ts","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":{"type":"git","url":"git+https://github.com/Cuadrix/puppeteer-page-proxy.git"},"keywords":["puppeteer","proxy","page","headless","chromium"],"license":"MIT","dependencies":{"got":"^11.5.1","http-proxy-agent":"^4.0.1","https-proxy-agent":"^5.0.0","socks-proxy-agent":"^5.0.0","tough-cookie":"^4.0.0"},"gitHead":"e0ea950e52700e0192367983c71719ccbdbb5d63","bugs":{"url":"https://github.com/Cuadrix/puppeteer-page-proxy/issues"},"_id":"smashah-puppeteer-page-proxy@1.2.8","_nodeVersion":"16.14.0","_npmVersion":"8.6.0","dist":{"integrity":"sha512-Dt9AjPfHaYyu5ZgihedElQcxENvcxh1iEtw1xL6Qb4jd0nr+1viPdt/ZzkwaTTad62QNSxJQxKlHLncyrgkK9A==","shasum":"cbf4385ec10b6441edf539cd6efca34e3e567c0c","tarball":"https://registry.npmjs.org/smashah-puppeteer-page-proxy/-/smashah-puppeteer-page-proxy-1.2.8.tgz","fileCount":11,"unpackedSize":24004,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC41xFK1xN78/L77aeSreMwF2OiOrz4mKXDB0Sb1fs5QwIhAL+CqtDFPX/R1Obg9frXmUN+eHxqSzrDiD1HUhRmug2j"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjEAiaACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmotGQ/+PvVp9PioELhPHfTdAqoSyZXMenmfM1hjEu5Cc1/ADZWVrpp6\r\nOPL7N6hyfQ22fd8s3A/NNe5cyVnZcmiJTYyF2mwpVwYZJvAdDUv6DJWwVyFb\r\nPHzsaky+7Akn4wYoIHflZolL29cec/n0r3cNC1QBPq5hpNkerIA0nK89L6Nv\r\nvLoCBw+HyfLHNhAIxwVrM3qTcXEpYkcu1ulS5XIDj86JmnK2uY6uek4z1fZC\r\np3G7U/2asesr2kodu7T1nLte4HbC69HNp9jSpkPouk/RTo5Sf77teG3mMQzm\r\n9YME7ioBsEqUbygqK1EG2xYPVY77jlbRY+vo2QdhcDI2fWuUlLp42xXvN/7c\r\nEpdpqNbuAnlC67tz4E173qtiyCphntp7wSatTZi+hdeKIMKDfGyssHKz5/yp\r\n7yuWsZXq0ATz9Ruqo42TjjV9WdGWhKrOBg5q3ijsEAsMTsLKU2QHGjgKVj+7\r\n9YBAiwSvQxtc3Hs12wv9xGmM4/HYNMIYhAGS0HMsk08enFilI3FAGcRGsjJv\r\nF7EmUhPWZSF0YwBZ7Ut7TXRZXoeDsP0ZQe3amqdssWhbaIbCMHLnTahNMu3W\r\nBBBqlERD8PftkVIUzPNfp3kNOnP2vMs65/l9rczlcH+wlfLeH5Q208msBR45\r\nqsrFdKKDRfJ/MuJWaCW33c1sKlOIGdHycTA=\r\n=guUf\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"smashah","email":"shah@idk.uno"},"directories":{},"maintainers":[{"name":"smashah","email":"shah@idk.uno"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/smashah-puppeteer-page-proxy_1.2.8_1661995161987_0.12719478835753728"},"_hasShrinkwrap":false},"1.2.9":{"name":"smashah-puppeteer-page-proxy","description":"Additional Node.js module to use with 'puppeteer' for setting proxies per page basis.","version":"1.2.9","author":{"name":"Cuadrix","email":"cuadrix12000@gmail.com","url":"https://github.com/Cuadrix"},"homepage":"https://github.com/Cuadrix/puppeteer-page-proxy","main":"./src/index.js","types":"./src/index.d.ts","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"repository":{"type":"git","url":"git+https://github.com/Cuadrix/puppeteer-page-proxy.git"},"keywords":["puppeteer","proxy","page","headless","chromium"],"license":"MIT","dependencies":{"got":"^11.5.1","http-proxy-agent":"^4.0.1","https-proxy-agent":"^5.0.0","socks-proxy-agent":"^5.0.0","tough-cookie":"^4.0.0"},"gitHead":"50d90586bdbc68f395142746c2e147c788777439","bugs":{"url":"https://github.com/Cuadrix/puppeteer-page-proxy/issues"},"_id":"smashah-puppeteer-page-proxy@1.2.9","_nodeVersion":"16.14.0","_npmVersion":"8.6.0","dist":{"integrity":"sha512-fPZLw3gbi74tp7ZDGYBAOXA8YdcMK33px7UeLLF7P4daqjkCRUJmgNwAl8nE2K/smfdtnTgMRY8w+HX3piN6eA==","shasum":"1ca49fd59515e1457f47801a50391fab16130af0","tarball":"https://registry.npmjs.org/smashah-puppeteer-page-proxy/-/smashah-puppeteer-page-proxy-1.2.9.tgz","fileCount":11,"unpackedSize":24056,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCtEGtkvs7OuxtNLo3W24ouCVZjrT2YVJtBHqA+pzv/TwIgNGScO+wByoc31cGCk3xX3GtRDK8PCH34ISBQC/vZleQ="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjQhyQACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmoniBAAmZvaNkKmhUxNsRsc32LM2GFpom+OuRG5kfsqzLJ/axfz/9t9\r\npCYK5hDD7QWu9OXt5HBvZhgejPKgf2/LObCnQdHNlB6rXQkAYiR6HtuQCSm4\r\nU3riHDxxn9x5xEYU7Vw/UkJ6u/njeXP/NxBzqCxN4UbUHHZdZpNZBUiiLe0G\r\nUQuAKzhqzBPhRtA3kQJgsyMz4ZHK/UzgnhtkgM11g/UrpEALA9scejFgwSM5\r\nIA2gojhHej+Za21zXdD6GNhClWaWxjC4/QNaHLZqBvm+SpwmqESIhlErgS2r\r\nT1aio1MNTa1RJCfnXbGbMxVIIuL8SB8BkBtgJ8YZ8ydJGwMdzvlLHUvaTKuI\r\nPutOzJNze/PeLqLZUmIeEQbSZjqRaYPlGAGBUnxi+KWZ79AZrTzj98ObZyM/\r\nnUxcEvorltwRb/SkaGz4yvoq30DY/kilpW2451HJ57848urFiAdHSqEbY9G7\r\nrhMH7b5sq2tMFYwDdVYy+1lHZTYoa5wg1QeW0+fluaaZMUxwq4vlZ8NuvSxP\r\naI20RhNRJJ5XXxb+CkshLnkkX1Fc+FfghJFTckl5UPv/Z40yUVeW1ddoI7vn\r\nmfRQAZz5lsKFcqUd5K4s2nz8L7aFeeTXRSXPDuzil9f52HgRuj2teursRw6E\r\nO9FRdR4Xd8ckf4tTBioR6Xr98Fc/iM1YTVw=\r\n=q8zm\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"smashah","email":"shah@idk.uno"},"directories":{},"maintainers":[{"name":"smashah","email":"shah@idk.uno"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/smashah-puppeteer-page-proxy_1.2.9_1665277071909_0.10715479871362832"},"_hasShrinkwrap":false}},"time":{"created":"2022-09-01T01:19:21.986Z","1.2.8":"2022-09-01T01:19:22.211Z","modified":"2022-10-09T00:57:52.145Z","1.2.9":"2022-10-09T00:57:52.071Z"},"maintainers":[{"name":"smashah","email":"shah@idk.uno"}],"description":"Additional Node.js module to use with 'puppeteer' for setting proxies per page basis.","homepage":"https://github.com/Cuadrix/puppeteer-page-proxy","keywords":["puppeteer","proxy","page","headless","chromium"],"repository":{"type":"git","url":"git+https://github.com/Cuadrix/puppeteer-page-proxy.git"},"author":{"name":"Cuadrix","email":"cuadrix12000@gmail.com","url":"https://github.com/Cuadrix"},"bugs":{"url":"https://github.com/Cuadrix/puppeteer-page-proxy/issues"},"license":"MIT","readme":"# puppeteer-page-proxy <img src=\"https://i.ibb.co/kQrN9QJ/puppeteer-page-proxy-logo.png\" align=\"right\" width=\"150\" height=\"150\">\nAdditional Node.js module to use with **[puppeteer](https://www.npmjs.com/package/puppeteer)** for setting proxies per page basis.\n\nForwards intercepted requests from the browser to Node.js where it handles the request then returns the response to the browser, changing the proxy as a result.\n\n## Features\n\n- Proxy per page and proxy per request\n- Supports **http**, **https**, **socks4** and **socks5** proxies\n- Supports authentication\n- Handles cookies\n\n## Installation\n```\nnpm i puppeteer-page-proxy\n```\n## API\n#### PageProxy(pageOrReq, proxy)\n\n- `pageOrReq` <[object](https://developer.mozilla.org/en-US/docs/Glossary/Object)> 'Page' or 'Request' object to set a proxy for.\n- `proxy` <[string](https://developer.mozilla.org/en-US/docs/Glossary/String)|[object](https://developer.mozilla.org/en-US/docs/Glossary/Object)> Proxy to use in the current page.\n  * Begins with a protocol (e.g. http://, https://, socks://)\n  * In the case of [proxy per request](https://github.com/Cuadrix/puppeteer-page-proxy#proxy-per-request), this can be an object with optional properties for overriding requests:\\\n`url`, `method`, `postData`, `headers`\\\nSee [httpRequest.continue](https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#httprequestcontinueoverrides) for more info about the above properties.\n  \n#### PageProxy.lookup(page[, lookupService, isJSON, timeout])\n\n- `page` <[object](https://developer.mozilla.org/en-US/docs/Glossary/Object)> 'Page' object to execute the request on.\n- `lookupService` <[string](https://developer.mozilla.org/en-US/docs/Glossary/String)> External lookup service to request data from.\n  * Fetches data from **api64.ipify.org** by default.\n- `isJSON` <[boolean](https://developer.mozilla.org/en-US/docs/Glossary/Boolean)> Whether to [JSON.parse](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse) the received response.\n  * Defaults to **true**.\n- `timeout` <[number](https://developer.mozilla.org/en-US/docs/Glossary/Number)|[string](https://developer.mozilla.org/en-US/docs/Glossary/String)> Time in milliseconds after which the request times out.\n  * Defaults to **30000**.\n- returns: <[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)> Promise which resolves to the response of the lookup request.\n\n**NOTE:** By default this method expects a response in [JSON](https://en.wikipedia.org/wiki/JSON#Example) format and [JSON.parse](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)'s it to a usable javascript object. To disable this functionality, set `isJSON` to `false`.\n    \n## Usage\n#### Importing:\n```js\nconst useProxy = require('puppeteer-page-proxy');\n```\n\n#### Proxy per page:\n```js\nawait useProxy(page, 'http://127.0.0.1:80');\n```\nTo remove proxy, omit or pass in falsy value (e.g `null`):\n```js\nawait useProxy(page, null);\n```\n\n#### Proxy per request:\n```js\nawait page.setRequestInterception(true);\npage.on('request', async request => {\n    await useProxy(request, 'https://127.0.0.1:443');\n});\n```\nThe request object itself is passed as the first argument. The proxy can now be changed every request.\n\nUsing it along with other interception methods:\n```js\nawait page.setRequestInterception(true);\npage.on('request', async request => {\n    if (request.resourceType() === 'image') {\n        request.abort();\n    } else {\n        await useProxy(request, 'socks4://127.0.0.1:1080');\n    }\n});\n```\n\nOverriding requests:\n```js\nawait page.setRequestInterception(true);\npage.on('request', async request => {\n    await useProxy(request, {\n        proxy: 'socks5://127.0.0.1:1080',\n        url: 'https://example.com',\n        method: 'POST',\n        postData: '404',\n        headers: {\n            accept: 'text/html'\n        }\n    });\n});\n```\n\n**NOTE:** It is necessary to set [page.setRequestInterception](https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#pagesetrequestinterceptionvalue) to true when setting proxies per request, otherwise the function will fail.\n\n#### Authenticating:\n```js\nconst proxy = 'https://user:pass@host:port';\n```\n\n#### IP lookup:\n```js\n// 1. Waits until done, 'then' continues\nconst data = await useProxy.lookup(page1);\n    console.log(data.ip);\n    \n// 2. Executes and 'comes back' once done\nuseProxy.lookup(page2).then(data => {\n    console.log(data.ip);\n});\n```\nIn case of any [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) errors, use `--disable-web-security` launch flag:\n```js\nconst browser = await puppeteer.launch({\n    args: ['--disable-web-security']\n});\n```\n\n## FAQ\n#### How does this module work?\n\nIt takes over the task of requesting content **from** the browser to do it internally via a requests library instead. Requests that are normally made by the browser, are thus made by Node. The IP's are changed by routing the requests through the specified proxy servers using ***-proxy-agent's**. When Node gets a response back from the server, it's forwarded to the browser for completion/rendering.\n\n#### Why am I getting _\"Request is already handled!\"_?\n\nThis happens when there is an attempt to handle the same request more than once. An intercepted request is handled by either [httpRequest.abort](https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#httprequestaborterrorcode), [httpRequest.continue](https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#httprequestcontinueoverrides) or [httpRequest.respond](https://github.com/puppeteer/puppeteer/blob/main/docs/api.md#httprequestrespondresponse) methods. Each of these methods 'send' the request to its destination. A request that has already reached its destination cannot be intercepted or handled.\n\n\n#### Why does the browser show _\"Your connection to this site is not secure\"_?\n\nBecause direct requests from the browser to the server are being intercepted by Node, making the establishment of a secure connection between them impossible. However, the requests aren't made by the browser, they are made by Node. All `https` requests made through Node using this module are secure. This is evidenced by the connection property of the response object:\n\n\n```\nconnection: TLSSocket {\n    _tlsOptions: {\n        secureContext: [SecureContext],\n        requestCert: true,\n        rejectUnauthorized: true,\n    },\n    _secureEstablished: true,\n    authorized: true,\n    encrypted: true,\n}\n```\nYou can think of the warning as a false positive.\n\n## Dependencies\n- [Got](https://github.com/sindresorhus/got)\n- [http-proxy-agent](https://github.com/TooTallNate/node-http-proxy-agent)\n- [https-proxy-agent](https://github.com/TooTallNate/node-https-proxy-agent)\n- [socks-proxy-agent](https://github.com/TooTallNate/node-socks-proxy-agent)\n- [tough-cookie](https://github.com/salesforce/tough-cookie)\n","readmeFilename":"README.md"}